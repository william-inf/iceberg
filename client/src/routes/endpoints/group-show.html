<template>
    <div if.bind="endpoints">
        <table class="table table-borderless dark-table">
            <thead>
                <tr>
                    <th></th>
                    <th>Name</th>
                    <th repeat.for="column of columns">${column.label}</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
            <require from="routes/endpoints/json-window"></require>
                <template repeat.for="entry of endpoints">
                    <tr>
                        <td width="5%">
                            <span class="badge badge-success" if.bind="entry.status == 'OK'">${entry.status}</span>
                            <span class="badge badge-danger" if.bind="entry.status != 'OK'">ERROR</span>
                        </td>
                        <td>
                            <div>${entry.urlEntry.name}</div>
                            <small class="text-darkest">${entry.urlEntry.addr}</small>
                        </td>
                        <td repeat.for="column of columns">${entry.body[column.key]}</td>
                        <td width="5%">
                            <i class="fas fa-plus pointer" if.bind="(show != $index)" click.delegate="show = $index"></i>
                            <i class="fas fa-minus pointer" if.bind="(show == $index)" click.delegate="show = null"></i>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="${3 + columns.length}">
                            <json-window content.bind="entry.body" if.bind="(show == $index)"></json-window>
                        </td>
                    </tr>
                </template>
            </tbody>
        </table>
    </div>
</template>